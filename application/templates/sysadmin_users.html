{% extends "layout.html" %}

{% block body %}
<div class="container mt-4">
    <table class="table table-striped table-bordered mt-3">
        <thead>
            <tr>
                <th>Display Name</th>
                <th>Identification Key</th>
                <th>Client ID</th>
                <th>User Type</th>
                <th>Status</th>
                <th>Block / Unblock</th>
                <th>Delete</th>
            </tr>
        </thead>

        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.display_name }}</td>
                <td>{{ user.IdentificationKey }}</td>
                <td>{{ user.client_id if user.client_id else "No Client" }}</td>

                <td>
                    {% if user.is_admin %}
                        Admin
                    {% else %}
                        User
                    {% endif %}
                </td>

                <td>
                    {{ "Blocked" if user.is_blocked else "Active" }}
                </td>

                <td>
                    <form method="post" action="{{ url_for('toggle_block_admin', user_id=user.id) }}">
                        <button class="btn btn-warning btn-sm" type="submit">
                            {{ "Unblock" if user.is_blocked else "Block" }}
                        </button>
                    </form>
                </td>

                <td>
                    <form method="post" action="{{ url_for('delete_user_admin', user_id=user.id) }}"
                          onsubmit="return confirm('Are you sure you want to delete this user? This action cannot be undone.');">
                        <button class="btn btn-danger btn-sm" type="submit">Delete</button>
                    </form>
                </td>

            </tr>
            {% endfor %}
        </tbody>

    </table>

</div>
{% endblock %}
